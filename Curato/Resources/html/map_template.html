<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <style>
        html, body, #map {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        .marker-label {
            background: #FFB31A;
            color: white;
            font-size: 12px;
            font-weight: bold;
            border-radius: 50%;
            text-align: center;
            width: 20px;
            height: 20px;
            line-height: 20px;
            transform: translate(-50%, -100%);
        }
    </style>
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey={API_KEY}&autoload=false"></script>
</head>
<body>
    <div id="map"></div>
    <script>
        kakao.maps.load(function () {
            var container = document.getElementById('map');
            var options = {
                center: new kakao.maps.LatLng({LAT}, {LNG}),
                level: 3
            };
            var map = new kakao.maps.Map(container, options);

            var locations = {COORD_ARRAY};  // Injected array
            var path = [];

            for (let i = 0; i < locations.length; i++) {
                const loc = locations[i];
                const markerPosition = new kakao.maps.LatLng(loc.lat, loc.lng);
                path.push(markerPosition);

                const marker = new kakao.maps.Marker({
                    position: markerPosition,
                    map: map
                });

                // Number overlay
                const numberOverlay = new kakao.maps.CustomOverlay({
                    position: markerPosition,
                    content: `<div class="marker-label">${i + 1}</div>`,
                    yAnchor: 1
                });
                numberOverlay.setMap(map);

                // Info window (on click)
                const infoWindow = new kakao.maps.InfoWindow({
                    content: `<div style="padding:5px 10px; font-size:13px;">${loc.name}</div>`
                });

                kakao.maps.event.addListener(marker, 'click', function () {
                    infoWindow.open(map, marker);
                });
            }

            // Draw line connecting the places
            var polyline = new kakao.maps.Polyline({
                path: path,
                strokeWeight: 5,
                strokeColor: '#FF6F61',
                strokeOpacity: 0.7,
                strokeStyle: 'solid'
            });
            polyline.setMap(map);
        });
    </script>
</body>
</html>